# Migration `20200314004759-set-up-day--country--and-daily-count-models`

This migration has been generated by Zach Latta at 3/14/2020, 12:47:59 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."Day" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "date" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT
) 

CREATE TABLE "quaint"."Country" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "iso" TEXT NOT NULL DEFAULT '' ,
    "name" TEXT NOT NULL DEFAULT '' 
) 

CREATE TABLE "quaint"."DailyCount" (
    "country" INTEGER NOT NULL  ,
    "currentlyInfected" INTEGER NOT NULL DEFAULT 0 ,
    "date" INTEGER NOT NULL  ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "newCases" INTEGER NOT NULL DEFAULT 0 ,
    "newDeaths" INTEGER NOT NULL DEFAULT 0 ,
    "totalCases" INTEGER NOT NULL DEFAULT 0 ,
    "totalDeaths" INTEGER NOT NULL DEFAULT 0 ,FOREIGN KEY ("date") REFERENCES "Day"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE UNIQUE INDEX "quaint"."Day.date" ON "Day"("date")

CREATE UNIQUE INDEX "quaint"."Country.iso" ON "Country"("iso")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200314004759-set-up-day--country--and-daily-count-models
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,35 @@
+datasource DS {
+  provider = "sqlite"
+  url = env("DATABASE_URL")
+}
+
+generator photonjs {
+  provider = "prisma-client-js"
+  binaryTargets = ["native", "rhel-openssl-1.0.x"]
+}
+
+model Day {
+  id Int @id @default(autoincrement())
+  date DateTime @unique
+  createdAt DateTime @default(now())
+  counts DailyCount[]
+}
+
+model Country {
+  id Int @id @default(autoincrement())
+  iso String @unique
+  name String
+  createdAt DateTime @default(now())
+  dailyCounts DailyCount[]
+}
+
+model DailyCount {
+  id Int @id @default(autoincrement())
+  date Day
+  country Country
+  totalCases Int
+  newCases Int
+  currentlyInfected Int
+  totalDeaths Int
+  newDeaths Int
+}
```


